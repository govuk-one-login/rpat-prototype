{% extends "layouts/main.html" %}

{% block pageTitle %}
  Check your answers template – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "javascript:window.history.back()"
  }) }}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds-from-desktop">

    <h1 class="govuk-heading-xl">
      Check these details before creating your service
    </h1>

    <dl class="govuk-summary-list">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Service Name
        </dt>
        <dd class="govuk-summary-list__value">
          {{data['clientName']}}
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="/create-service-key-warning-hint/enter-client-name">Change<span class="govuk-visually-hidden"> name</span></a>
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Public key type
        </dt>
        <dd class="govuk-summary-list__value">
          {{data['publicKeyType']}}
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="/create-service-key-warning-hint/select-key-type">Change<span class="govuk-visually-hidden"> public key type</span></a>
        </dd>
      </div>
      {% if data['publicKeyType'] === 'Public key URL (JWKS)' %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            JWKS Endpoint
          </dt>
          <dd class="govuk-summary-list__value">
            {{data['jwksEndpoint']}}
          </dd>
          <dd class="govuk-summary-list__actions">
            <a class="govuk-link" href="/create-service-key-warning-hint/select-key-type">Change<span class="govuk-visually-hidden"> JWKS endpoint</span></a>
          </dd>
        </div> 
      {% endif %}
      {% if data['publicKeyType'] === 'Client secret' %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Client Secret
          </dt>
          <dd class="govuk-summary-list__value">
            {{data['clientSecret']}}
          </dd>
          <dd class="govuk-summary-list__actions">
            <a class="govuk-link" href="/create-service-key-warning-hint/select-key-type">Change<span class="govuk-visually-hidden"> client secret</span></a>
          </dd>
        </div> 
      {% endif %}
      {% if data['publicKeyType'] === 'Fixed public key' %}
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Static Key
          </dt>
          <dd class="govuk-summary-list__value">
            {{data['staticKey']}}
          </dd>
          <dd class="govuk-summary-list__actions">
            <a class="govuk-link" href="/create-service-key-warning-hint/select-key-type">Change<span class="govuk-visually-hidden"> static key</span></a>
          </dd>
        </div> 
      {% endif %}
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Redirect url(s)
        </dt>
        <dd class="govuk-summary-list__value">
          {% if data['redirectUrls'].length > 0 %}
            {% set urlList = data['redirectUrls'].split(',') %}
            {% for url in urlList %}
              {{ url | trim }}<br>
            {% endfor %}
          {% endif %}
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="/create-service-key-warning-hint/redirect-urls">Change<span class="govuk-visually-hidden"> scopes</span></a>
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Scopes
        </dt>
        <dd class="govuk-summary-list__value">
          OpenID
          {% if data['selectedScopes'].length > 0 %}
            {% for scope in data['selectedScopes'] %}
              <br>{{ scope | trim }}
            {% endfor %}
          {% endif %}
        </dd>
        <dd class="govuk-summary-list__actions">
          <a class="govuk-link" href="/create-service-key-warning-hint/select-scopes">Change<span class="govuk-visually-hidden"> scopes</span></a>
        </dd>
      </div>
    </dl>

    <h2 class="govuk-heading-m">Now create your service</h2>

    <form action="/confirmation" method="post" novalidate>

      <div class="govuk-button-group">
        {{ govukButton({
          text: "Create service"
        }) }}

        {{ govukButton({
          text: "Add identity journey configuration",
          classes: "govuk-button--secondary",
          disabled: data['publicKeyType'] === 'Client secret'
        }) }}

        {{ govukButton({
          text: "Add additional configuration",
          classes: "govuk-button--secondary"
        }) }}
      </div>

    </form>

  </div>
</div>
{% endblock %}